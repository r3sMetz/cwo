var capAnimation=function(){function e(){var n=Math.floor(Math.random()*t.length);return n!==i?n:e()}function n(){if(!device.isMobile&&device.width()>=device.screen.md){var n=$("#the_cap");n.addClass("playable"),$.each(t,function(e){t[e]=new Audio(defaults.template_directory_uri+"/assets/mp3/lache_"+e+".mp3")}),setInterval(function(){n.toggleClass("moving")},2500),n.on("click",function(){var n=e();t[n].play(),i=n})}}var i=!1,t=Array(4);return{setup:n}}(),cwoContact=function(){function e(){s.nameField=$("#name"),s.emailField=$("#email"),s.messageField=$("#message"),s.response=$("#cwo_modal"),s.sendBtn=$("#sendbtn")}function n(e,n){e?s.sendBtn.addClass("btn disabled"):s.sendBtn.removeClass("btn disabled"),s.sendBtn.val(n)}function i(){s.nameField.val(null),s.emailField.val(null),s.messageField.val(null)}function t(){return s.errors=[],/^\w{3,}/.test(s.nameField.val())||s.errors.push("Name muss mindestens 2 Stellen enthalten"),/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-z]{2,5})$/.test(s.emailField.val())||s.errors.push("Die eingegebene Mailadresse ist ung√ºltig"),/^\w{3,}/.test(s.messageField.val())||s.errors.push("Bitte gib eine Nachricht ein."),0===s.errors.length}function a(e){e.preventDefault(),t()===!0?(n(!0,"Bitte warten..."),o()):r(s.errors,"red")}function o(){$.ajax({url:defaults.ajax_url,method:"POST",data:{action:"contact_ajax_request",name:s.nameField.val(),email:s.emailField.val(),message:s.messageField.val()},success:function(e){console.log(e),r([e],"green"),i(),n(!1,"Senden")},error:function(e){r([e],"red"),n(!1,"Senden")}})}function r(e,n){var i=$("#the_modal_body");i.css("color",n);var t="";e.forEach(function(e){t+="<p>"+e+"</p>"}),i.html(t),s.response.modal("show")}function l(){e(),$("#cwo_contact").on("submit",a)}var s={nameField:!1,emailField:!1,messageField:!1,errors:[],modal:!1,sendBtn:!1};return{setup:l}}(),device=function(){function e(){return new RegExp("/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/").test(navigator.userAgent)}function n(e){0===e?document.ontouchmove=function(e){e.preventDefault()}:1===e&&(document.ontouchmove=function(e){return!0})}function i(){return window.innerWidth}function t(){return window.innerHeight}var a={sm:768,md:992,lg:1200,xl:1450};return{screen:a,isMobile:e(),isPhone:function(){return i()<a.sm&&e()}(),isTablet:function(){return i()<a.lg&&i()>=a.sm&&e()}(),isDesktop:function(){return i()>=a.lg&&e===!1}(),toggleScrollability:n,browser:function(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?"Opera":navigator.userAgent.indexOf("Chrome")!=-1?"Chrome":navigator.userAgent.indexOf("Safari")!=-1?e()?"Safari iOS":"Safari":navigator.userAgent.indexOf("Firefox")!=-1?"Firefox":navigator.userAgent.indexOf("MSIE")!=-1||1==!!document.documentMode?"IE":"unknown"}(),height:t,width:i,supportsFileAPI:function(){return"File"in window&&"FileReader"in window&&"FileList"in window&&"Blob"in window}()}}(),events=function(){function e(){var e=device.isMobile?"orientationchange":"resize";$(window).on(e,function(){})}function n(){fadeOverlay.setClickEvents(),$(".cwo_loc_back").on("click",function(){fadeOverlay.show(!0,function(){document.referrer.includes("cwo")?window.history.back():window.location.href=defaults.home_url})}),$(".single_gallery").on("click",function(){var e=$(this).data("url");fadeOverlay.show(e)})}function i(){$(window).on("scroll",function(){var e=$(window).scrollTop(),n=$(".cwo_navbar");e>0?n.addClass("scrolled"):n.removeClass("scrolled")})}return{window:e,click:n,scroll:i}}(),fadeOverlay=function(e,n){function i(n,i){$("#fadeOverlay").css("display","block").animate({opacity:1},500,function(){"string"==typeof n?e.location.href=n:"boolean"==typeof n&&i()})}function t(){$("#fadeOverlay").animate({opacity:0},500,function(){$(this).css("display","none")})}function a(){$(".globalHeaderImage").length?headImage.status.headImageInit?fadeOverlay.hide():setTimeout(a,100):fadeOverlay.hide()}function o(){$(".fadeLink").on("click",function(e){e.preventDefault();var n=$(this).attr("href");fadeOverlay.show(n)})}return{show:i,hide:t,pageShow:a,setClickEvents:o}}(window,document),galerieSlider=function(){function e(e){t.slick("slickGoTo",e,!0),device.toggleScrollability(),a.addClass("active")}function n(){device.toggleScrollability(),a.removeClass("active")}function i(){t=$("#the_galery_slider"),a=$("#the_gallery_overlay"),t.slick({slidesToShow:1,nextArrow:".nav_right",prevArrow:".nav_left"}),$(".single_slide_image").on("click",function(){e(this.getAttribute("data-key"))}),$("#close_galery").on("click",n)}var t=!1,a=!1;return{setup:i}}(),historySlider=function(){function e(){console.log("history-slider.js running");var e=$(".the_history");e.slick({arrows:!1,fade:!0});var n=$(".the_history_navigation li");n.on("click",function(){var i=$(this);if(!i.hasClass("active")){var t=parseInt(i.data("index"));n.removeClass("active"),i.addClass("active"),e.slick("slickGoTo",t)}})}return{setup:e}}(),main=function(){function e(){console.log("main.js running"),events.scroll(),events.click(),$(".the_history").length&&historySlider.setup(),$("#the_galery_slider").length&&galerieSlider.setup(),$(".page-memorial_content").length&&$("iframe").reframe(),$("#the_cap").length&&capAnimation.setup(),$("#cwo_contact").length&&cwoContact.setup()}return{setup:e}}();$(document).ready(main.setup),window.onpageshow=fadeOverlay.pageShow;