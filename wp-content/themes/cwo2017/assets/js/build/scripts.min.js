var capAnimation=function(){function e(){var n=Math.floor(Math.random()*i.length);return n!==t?n:e()}function n(){$('[data-toggle="tooltip"]').tooltip();var n=$("#the_cap");n.addClass("playable"),$.each(i,function(e){i[e]=new Audio(defaults.template_directory_uri+"/assets/mp3/lache_"+e+".mp3")}),setInterval(function(){n.toggleClass("moving")},2500),n.on("click",function(){var n=e();i[n].play(),t=n})}var t=!1,i=Array(4);return{setup:n}}(),cwoContact=function(){function e(){l.nameField=$("#name"),l.emailField=$("#email"),l.messageField=$("#message"),l.response=$("#cwo_modal"),l.sendBtn=$("#sendbtn"),l.datasec=$("#datasec")}function n(e,n){e?l.sendBtn.addClass("btn disabled"):l.sendBtn.removeClass("btn disabled"),l.sendBtn.val(n)}function t(){l.nameField.val(null),l.emailField.val(null),l.messageField.val(null),l.datasec[0].checked=!1}function i(){return l.errors=[],/^\w{3,}/.test(l.nameField.val())||l.errors.push("Name muss mindestens 2 Stellen enthalten"),/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-z]{2,5})$/.test(l.emailField.val())||l.errors.push("Die eingegebene Mailadresse ist ung√ºltig"),/^\w{3,}/.test(l.messageField.val())||l.errors.push("Bitte gib eine Nachricht ein."),l.datasec[0].checked||l.errors.push("Bitte akzeptiere die Datenschutzbestimmungen"),0===l.errors.length}function a(e){e.preventDefault(),!0===i()?(n(!0,"Bitte warten..."),o()):r(l.errors,"red")}function o(){$.ajax({url:defaults.ajax_url,method:"POST",data:{action:"contact_ajax_request",name:l.nameField.val(),email:l.emailField.val(),message:l.messageField.val()},success:function(e){console.log(e),r([e],"green"),t(),n(!1,"Senden")},error:function(e){r([e],"red"),n(!1,"Senden")}})}function r(e,n){var t=$("#the_modal_body");t.css("color",n);var i="";e.forEach(function(e){i+="<p>"+e+"</p>"}),t.html(i),l.response.modal("show")}function s(){e(),$("#cwo_contact").on("submit",a)}var l={nameField:!1,emailField:!1,messageField:!1,errors:[],modal:!1,sendBtn:!1};return{setup:s}}(),device=function(){function e(){return new RegExp("/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/").test(navigator.userAgent)}function n(e){0===e?document.ontouchmove=function(e){e.preventDefault()}:1===e&&(document.ontouchmove=function(e){return!0})}function t(){return window.innerWidth}function i(){return window.innerHeight}var a={sm:768,md:992,lg:1200,xl:1450};return{transitions:{short:300,std:500,long:800},screen:a,isMobile:e(),isPhone:function(){return t()<a.sm&&e()}(),isTablet:function(){return t()<a.lg&&t()>=a.sm&&e()}(),isDesktop:function(){return t()>=a.lg&&!1===e}(),toggleScrollability:n,browser:function(){return-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"Opera":-1!=navigator.userAgent.indexOf("Chrome")?"Chrome":-1!=navigator.userAgent.indexOf("Safari")?e()?"Safari iOS":"Safari":-1!=navigator.userAgent.indexOf("Firefox")?"Firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":"unknown"}(),height:i,width:t,supportsFileAPI:function(){return"File"in window&&"FileReader"in window&&"FileList"in window&&"Blob"in window}()}}(),eventsTimeSwitcher=function(){function e(){var e=$(".fragment_link"),n=$("#fragment_bar"),t=$("#page-events_animation_container"),i=$(".page-events-filter");e.on("click",function(){var a=$(this);if(!a.hasClass("active")){var o=a.data("fragment-class");"past"===o?window.sessionStorage.setItem("si_events_past",!0):window.sessionStorage.getItem("si_events_past")&&window.sessionStorage.removeItem("si_events_past"),e.removeClass("active"),a.addClass("active"),n.removeAttr("class"),n.addClass(o),t.addClass("biggie"),t.animate({opacity:0},device.transitions.short,function(){i.addClass("hidden"),$('.page-events-filter[data-filter="'+o+'"]').removeClass("hidden"),t.removeClass("biggie"),t.animate({opacity:1},device.transitions.short)})}}),window.sessionStorage.getItem("si_events_past")&&$('.fragment_link[data-fragment-class="past"]').trigger("click")}return{setup:e}}(),events=function(){function e(){var e=device.isMobile?"orientationchange":"resize";$(window).on(e,function(){})}function n(){fadeOverlay.setClickEvents(),$(".cwo_loc_back").on("click",function(){fadeOverlay.show(!0,function(){document.referrer.includes("cwo")?window.history.back():window.location.href=defaults.home_url})}),$(".single_gallery").on("click",function(){var e=$(this).data("url");fadeOverlay.show(e)})}function t(){$(window).on("scroll",function(){var e=$(window).scrollTop(),n=$(".cwo-navbar");e>0?n.addClass("blackened"):n.removeClass("blackened")})}return{window:e,click:n,scroll:t}}(),fadeOverlay=function(e,n){function t(n,t){$("#fadeOverlay").css("display","block").animate({opacity:1},500,function(){"string"==typeof n?e.location.href=n:"boolean"==typeof n&&t()})}function i(){$("#fadeOverlay").animate({opacity:0},500,function(){$(this).css("display","none")})}function a(){$(".globalHeaderImage").length?headImage.status.headImageInit?fadeOverlay.hide():setTimeout(a,100):fadeOverlay.hide()}function o(){$(".fadeLink").on("click",function(e){e.preventDefault();var n=$(this).attr("href");fadeOverlay.show(n)})}return{show:t,hide:i,pageShow:a,setClickEvents:o}}(window,document),galerieSlider=function(){function e(e){device.toggleScrollability(0),i.slick("slickGoTo",e,!0),device.toggleScrollability(),a.addClass("active")}function n(){device.toggleScrollability(),a.removeClass("active"),device.toggleScrollability(1)}function t(){i=$("#the_galery_slider"),a=$("#the_gallery_overlay"),i.slick({slidesToShow:1,nextArrow:".nav_right",prevArrow:".nav_left"}),$(".single_slide_image").on("click",function(){e(this.getAttribute("data-key"))}),$("#close_galery").on("click",n)}var i=!1,a=!1;return{setup:t}}(),historySlider=function(){function e(){console.log("history-slider.js running");var e=$(".the_history");e.slick({arrows:!1,fade:!0,swipe:!1});var n=$(".the_history_navigation li");n.on("click",function(){var t=$(this);if(!t.hasClass("active")){var i=parseInt(t.data("index"));n.removeClass("active"),t.addClass("active"),e.slick("slickGoTo",i)}})}return{setup:e}}(),main=function(){function e(){console.log("main.js running"),events.scroll(),events.click(),page_forwarding.setup(),$(".the_history").length&&historySlider.setup(),$("#the_galery_slider").length&&galerieSlider.setup(),$(".page-memorial_content").length&&$("iframe").reframe(),$("#the_cap").length&&capAnimation.setup(),$("#cwo_contact").length&&cwoContact.setup(),$("#fragment_slider").length&&eventsTimeSwitcher.setup()}return{setup:e}}();$(document).ready(main.setup),window.onpageshow=fadeOverlay.pageShow;var page_forwarding=function(){function e(){if(!o.headline){var e=document.createElement("h3"),a=document.createElement("span");a.className="cwo-btn cwo-btn-red forwardInterupt",a.innerHTML="Abbrechen",a.style.fontSize="16px";var r=document.createElement("span");r.className="cwo-btn cwo-btn-red catchUpButton",r.innerHTML="Hopp, mach!",r.style.fontSize="16px",r.style.marginLeft="15px",e.innerHTML="Du wirst weitergeleitet:<br class='hidden-xs'>"+o.href+" <br/>in <span class='forwarding_secs'>"+o.time_initial+"</span>s<br/>",e.className="color-white",e.id="forwardLine",$("#fadeOverlay").append(e),o.headline=$("#forwardLine"),o.headline.append(a),$(".forwardInterupt").on("click",i),o.headline.append(r),$(".catchUpButton").on("click",t)}o.time=o.time_initial,o.headline.children(".forwarding_secs").text(o.time_initial),o.headline.animate({opacity:1},device.transitions.short,n)}function n(){var e=o.headline.children(".forwarding_secs");o.the_countdown=setInterval(function(){o.time>0?(o.time--,e.text(o.time)):t()},1e3)}function t(){clearInterval(o.the_countdown),o.headline.animate({opacity:0},device.transitions.short,function(){window.location.href=o.href})}function i(){o.the_countdown&&(clearInterval(o.the_countdown),o.headline.animate({opacity:0},device.transitions.short,function(){o.headline.children(".forwarding_secs").text(o.time_initial),fadeOverlay.hide()}))}function a(){$(".forwardLink").on("click",function(n){n.preventDefault(),o.href=this.getAttribute("href"),fadeOverlay.show(!0,e)})}var o={time_initial:10,time:null,href:null,headline:null,the_countdown:null};return{setup:a}}();