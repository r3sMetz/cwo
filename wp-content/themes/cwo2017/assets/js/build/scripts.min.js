var capAnimation=function(){function e(){var n=Math.floor(Math.random()*i.length);return n!==t?n:e()}function n(){if(!device.isMobile&&device.width()>=device.screen.md){var n=$("#the_cap");n.addClass("playable"),$.each(i,function(e){i[e]=new Audio(defaults.template_directory_uri+"/assets/mp3/lache_"+e+".mp3")}),setInterval(function(){n.toggleClass("moving")},2500),n.on("click",function(){var n=e();i[n].play(),t=n})}}var t=!1,i=Array(4);return{setup:n}}(),cwoContact=function(){function e(){s.nameField=$("#name"),s.emailField=$("#email"),s.messageField=$("#message"),s.response=$("#cwo_modal"),s.sendBtn=$("#sendbtn")}function n(e,n){e?s.sendBtn.addClass("btn disabled"):s.sendBtn.removeClass("btn disabled"),s.sendBtn.val(n)}function t(){s.nameField.val(null),s.emailField.val(null),s.messageField.val(null)}function i(){return s.errors=[],/^\w{3,}/.test(s.nameField.val())||s.errors.push("Name muss mindestens 2 Stellen enthalten"),/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-z]{2,5})$/.test(s.emailField.val())||s.errors.push("Die eingegebene Mailadresse ist ung√ºltig"),/^\w{3,}/.test(s.messageField.val())||s.errors.push("Bitte gib eine Nachricht ein."),0===s.errors.length}function a(e){e.preventDefault(),i()===!0?(n(!0,"Bitte warten..."),r()):o(s.errors,"red")}function r(){$.ajax({url:defaults.ajax_url,method:"POST",data:{action:"contact_ajax_request",name:s.nameField.val(),email:s.emailField.val(),message:s.messageField.val()},success:function(e){console.log(e),o([e],"green"),t(),n(!1,"Senden")},error:function(e){o([e],"red"),n(!1,"Senden")}})}function o(e,n){var t=$("#the_modal_body");t.css("color",n);var i="";e.forEach(function(e){i+="<p>"+e+"</p>"}),t.html(i),s.response.modal("show")}function l(){e(),$("#cwo_contact").on("submit",a)}var s={nameField:!1,emailField:!1,messageField:!1,errors:[],modal:!1,sendBtn:!1};return{setup:l}}(),device=function(){function e(){return new RegExp("/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/").test(navigator.userAgent)}function n(e){0===e?document.ontouchmove=function(e){e.preventDefault()}:1===e&&(document.ontouchmove=function(e){return!0})}function t(){return window.innerWidth}function i(){return window.innerHeight}var a={sm:768,md:992,lg:1200,xl:1450};return{transitions:{short:300,std:500,long:800},screen:a,isMobile:e(),isPhone:function(){return t()<a.sm&&e()}(),isTablet:function(){return t()<a.lg&&t()>=a.sm&&e()}(),isDesktop:function(){return t()>=a.lg&&e===!1}(),toggleScrollability:n,browser:function(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?"Opera":navigator.userAgent.indexOf("Chrome")!=-1?"Chrome":navigator.userAgent.indexOf("Safari")!=-1?e()?"Safari iOS":"Safari":navigator.userAgent.indexOf("Firefox")!=-1?"Firefox":navigator.userAgent.indexOf("MSIE")!=-1||1==!!document.documentMode?"IE":"unknown"}(),height:i,width:t,supportsFileAPI:function(){return"File"in window&&"FileReader"in window&&"FileList"in window&&"Blob"in window}()}}(),eventsTimeSwitcher=function(){function e(){var e=$(".fragment_link"),n=$("#fragment_bar"),t=$("#page-events_animation_container"),i=$(".page-events-filter");e.on("click",function(){var a=$(this);if(!a.hasClass("active")){var r=a.data("fragment-class");e.removeClass("active"),a.addClass("active"),n.removeAttr("class"),n.addClass(r),t.animate({opacity:0},device.transitions.short,function(){i.addClass("hidden"),$('.page-events-filter[data-filter="'+r+'"]').removeClass("hidden"),t.animate({opacity:1},device.transitions.short)})}})}return{setup:e}}(),events=function(){function e(){var e=device.isMobile?"orientationchange":"resize";$(window).on(e,function(){})}function n(){fadeOverlay.setClickEvents(),$(".cwo_loc_back").on("click",function(){fadeOverlay.show(!0,function(){document.referrer.includes("cwo")?window.history.back():window.location.href=defaults.home_url})}),$(".single_gallery").on("click",function(){var e=$(this).data("url");fadeOverlay.show(e)})}function t(){$(window).on("scroll",function(){var e=$(window).scrollTop(),n=$(".cwo_navbar");e>0?n.addClass("scrolled"):n.removeClass("scrolled")})}return{window:e,click:n,scroll:t}}(),fadeOverlay=function(e,n){function t(n,t){$("#fadeOverlay").css("display","block").animate({opacity:1},500,function(){"string"==typeof n?e.location.href=n:"boolean"==typeof n&&t()})}function i(){$("#fadeOverlay").animate({opacity:0},500,function(){$(this).css("display","none")})}function a(){$(".globalHeaderImage").length?headImage.status.headImageInit?fadeOverlay.hide():setTimeout(a,100):fadeOverlay.hide()}function r(){$(".fadeLink").on("click",function(e){e.preventDefault();var n=$(this).attr("href");fadeOverlay.show(n)})}return{show:t,hide:i,pageShow:a,setClickEvents:r}}(window,document),galerieSlider=function(){function e(e){i.slick("slickGoTo",e,!0),device.toggleScrollability(),a.addClass("active")}function n(){device.toggleScrollability(),a.removeClass("active")}function t(){i=$("#the_galery_slider"),a=$("#the_gallery_overlay"),i.slick({slidesToShow:1,nextArrow:".nav_right",prevArrow:".nav_left"}),$(".single_slide_image").on("click",function(){e(this.getAttribute("data-key"))}),$("#close_galery").on("click",n)}var i=!1,a=!1;return{setup:t}}(),historySlider=function(){function e(){console.log("history-slider.js running");var e=$(".the_history");e.slick({arrows:!1,fade:!0});var n=$(".the_history_navigation li");n.on("click",function(){var t=$(this);if(!t.hasClass("active")){var i=parseInt(t.data("index"));n.removeClass("active"),t.addClass("active"),e.slick("slickGoTo",i)}})}return{setup:e}}(),main=function(){function e(){console.log("main.js running"),events.scroll(),events.click(),page_forwarding.setup(),$(".the_history").length&&historySlider.setup(),$("#the_galery_slider").length&&galerieSlider.setup(),$(".page-memorial_content").length&&$("iframe").reframe(),$("#the_cap").length&&capAnimation.setup(),$("#cwo_contact").length&&cwoContact.setup(),$("#fragment_slider").length&&eventsTimeSwitcher.setup()}return{setup:e}}();$(document).ready(main.setup),window.onpageshow=fadeOverlay.pageShow;var page_forwarding=function(){function e(){if(!a.headline){var e=document.createElement("h3"),i=document.createElement("span");i.className="cwo-btn cwo-btn-red forwardInterupt",i.innerHTML="Abbrechen",i.style.fontSize="16px",e.innerHTML="Du wirst weitergeleitet:<br class='hidden-xs'>"+a.href+" <br/>in <span class='forwarding_secs'>"+a.time_initial+"</span>s<br/>",e.className="color-white",e.id="forwardLine",$("#fadeOverlay").append(e),a.headline=$("#forwardLine"),a.headline.append(i),$(".forwardInterupt").on("click",t)}a.time=a.time_initial,a.headline.children(".forwarding_secs").text(a.time_initial),a.headline.animate({opacity:1},device.transitions.short,n)}function n(){var e=a.headline.children(".forwarding_secs");a.the_countdown=setInterval(function(){a.time>0?(a.time--,e.text(a.time)):(clearInterval(a.the_countdown),a.headline.animate({opacity:0},device.transitions.short,function(){window.location.href=a.href}))},1e3)}function t(){a.the_countdown&&(clearInterval(a.the_countdown),a.headline.animate({opacity:0},device.transitions.short,function(){a.headline.children(".forwarding_secs").text(a.time_initial),fadeOverlay.hide()}))}function i(){$(".forwardLink").on("click",function(n){n.preventDefault(),a.href=this.getAttribute("href"),fadeOverlay.show(!0,e)})}var a={time_initial:5,time:null,href:null,headline:null,the_countdown:null};return{setup:i}}();